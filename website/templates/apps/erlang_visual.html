{% extends 'apps/layout.html' %}
{% block app_content %}
<h2 class="fw-bold mb-4">Erlang Visual</h2>
<div class="card mb-4">
  <div class="card-body">
    <form id="erlang-visual-form" method="post" hx-post="{{ url_for('apps.erlang_visual_view') }}" hx-target="#erlang-visual-results" hx-swap="innerHTML" class="row g-3">
      <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">
      <div class="col-md-4">
        <label class="form-label">Forecast</label>
        <input type="number" step="any" name="forecast" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">AHT (seg)</label>
        <input type="number" step="any" name="aht" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Agentes</label>
        <input type="number" name="agents" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">AWT (seg)</label>
        <input type="number" step="any" name="awt" class="form-control" required>
      </div>
      <div class="col-md-4">
        <label class="form-label">Intervalo</label>
        <select name="interval" class="form-select">
          <option value="1800">30 minutos</option>
          <option value="3600" selected>1 hora</option>
        </select>
      </div>
      <div class="col-md-4">
        <label class="form-label">SL Objetivo</label>
        <input type="number" step="any" name="sl_target" class="form-control" value="0.8">
      </div>
      <div class="col-12">
        <button class="btn btn-primary" type="submit">Calcular</button>
      </div>
    </form>
  </div>
</div>

<div class="btn-group mb-4" role="group">
  <button type="button" class="btn btn-secondary"
          hx-post="{{ url_for('apps.erlang_visual_view') }}"
          hx-include="#erlang-visual-form"
          hx-vals='{"action":"increase_demand"}'
          hx-target="#erlang-visual-results" hx-swap="innerHTML">
    Aumentar demanda
  </button>
  <button type="button" class="btn btn-secondary"
          hx-post="{{ url_for('apps.erlang_visual_view') }}"
          hx-include="#erlang-visual-form"
          hx-vals='{"action":"add_agents"}'
          hx-target="#erlang-visual-results" hx-swap="innerHTML">
    Agregar 5 agentes
  </button>
  <button type="button" class="btn btn-secondary"
          hx-post="{{ url_for('apps.erlang_visual_view') }}"
          hx-include="#erlang-visual-form"
          hx-vals='{"action":"reduce_aht"}'
          hx-target="#erlang-visual-results" hx-swap="innerHTML">
    Reducir AHT
  </button>
</div>
<div id="erlang-visual-results">
  {% include 'partials/erlang_visual_results.html' %}
</div>
{% endblock %}

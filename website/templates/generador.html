<!DOCTYPE html>
<html>
<head>
    <title>Generador de Turnos</title>
</head>
<body>
    <h1>Generador de Turnos v6.2</h1>
    
    <form action="/generador" method="POST" enctype="multipart/form-data">
        <!-- Perfil de optimización -->
        <div>
            <label>Perfil de Optimización:</label>
            <select name="optimization_profile" id="optimization_profile">
                <option>Equilibrado (Recomendado)</option>
                <option>100% Exacto</option>
                <option>JEAN</option>
                <option>Cobertura Máxima (Completo)</option>
                <option>Cobertura Real_Jean</option>
                <option>HPO + Cascada 100%</option>
            </select>
        </div>
        
        <!-- Configuración básica -->
        <div>
            <label>Iteraciones HPO:</label>
            <input type="number" name="hpo_trials" value="12" min="3" max="50">
        </div>
        
        <div>
            <label>Tiempo solver (s):</label>
            <input type="number" name="solver_time" value="180" min="60" max="600">
        </div>
        
        <div>
            <label>Cobertura objetivo (%):</label>
            <input type="number" name="coverage" value="100" min="80" max="110">
        </div>
        
        <!-- Cálculo de cobertura: fijo a métrica simétrica (sin selector) -->
        <div>
            <label>Métrica de cobertura:</label>
            <input type="text" value="Eficiencia de staffing (simétrica)" readonly>
            <small>Fórmula única: min(asignado/requerido, requerido/asignado) × 100</small>
        </div>
        
        <!-- Tipos de contrato -->
        <div>
            <label>
                <input type="checkbox" name="use_ft" checked> Full Time (48h)
            </label>
        </div>
        
        <div>
            <label>
                <input type="checkbox" name="use_pt" checked> Part Time (24h)
            </label>
        </div>
        
        <!-- Archivo -->
        <div>
            <label>Archivo de demanda (.xlsx):</label>
            <input type="file" name="file" accept=".xlsx,.xls" required>
        </div>
        
        <button type="submit">Ejecutar Optimización</button>
    </form>

    <script>
    // Auto-update coverage for HPO profile
    document.getElementById('optimization_profile').addEventListener('change', function() {
        const coverageInput = document.querySelector('input[name="coverage"]');
        if (this.value.includes('HPO') || this.value.includes('100%')) {
            coverageInput.value = 100;
        }
    });
    
    // No hay selector de método; se usa siempre la métrica simétrica
    </script>
</body>
</html>

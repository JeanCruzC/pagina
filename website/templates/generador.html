<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Generador de Turnos v6.2 - Sistema Corregido</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/css/streamlit-dark.css" rel="stylesheet">
</head>
<body class="bg-app">

<div class="container-xxl py-4">
  <h1 class="app-title">Generador de Turnos v6.2 ‚Äî Sistema Corregido</h1>

  <div class="row g-4 mt-1">
    <!-- SIDEBAR (id√©ntico a streamlit) -->
    <div class="col-12 col-lg-4">
      <div class="st-card">
        <div class="d-flex align-items-center mb-2">
          <div class="badge-dot me-2"></div>
          <h5 class="mb-0">Configuraci√≥n</h5>
        </div>

        <form action="/generador" method="POST" enctype="multipart/form-data" id="form-sync">
          <div class="mb-3">
            <label class="form-label">Iteraciones JEAN</label>
            <input type="number" min="1" max="30" step="1" name="iterations" value="3" class="form-control st-input">
          </div>

          <div class="mb-3">
            <label class="form-label">Tiempo solver (s)</label>
            <input type="number" min="0" max="600" step="1" name="solver_time" value="120" class="form-control st-input">
            <div class="form-text">0 = sin l√≠mite (no recomendado en modo s√≠ncrono)</div>
          </div>

          <div class="mb-3">
            <label class="form-label">Cobertura objetivo (%)</label>
            <input type="number" min="95" max="100" step="1" name="coverage" value="98" class="form-control st-input">
          </div>

          <div class="row">
            <div class="col-6 mb-3">
              <label class="form-label">Break desde inicio (horas)</label>
              <input type="number" min="0" max="6" step="0.5" name="break_from_start" value="2" class="form-control st-input">
            </div>
            <div class="col-6 mb-3">
              <label class="form-label">Break antes del fin (horas)</label>
              <input type="number" min="0" max="6" step="0.5" name="break_from_end" value="2" class="form-control st-input">
            </div>
          </div>

          <div class="st-divider"></div>

          <div class="mb-2">
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="use_ft" name="use_ft" checked>
              <label class="form-check-label" for="use_ft">Full Time (48h)</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="use_pt" name="use_pt" checked>
              <label class="form-check-label" for="use_pt">Part Time (24h)</label>
            </div>
          </div>

          <div class="st-divider"></div>

          <div class="mb-3">
            <label class="form-label">Perfil de Optimizaci√≥n</label>
            <select class="form-select st-input" name="profile">
              <option>Equilibrado (Recomendado)</option>
              <option>Conservador</option>
              <option>Agresivo</option>
              <option>M√°xima Cobertura</option>
              <option>M√≠nimo Costo</option>
              <option>100% Cobertura Eficiente</option>
              <option>100% Cobertura Total</option>
              <option>Cobertura Perfecta</option>
              <option>100% Exacto</option>
              <option selected>JEAN</option>
              <option>JEAN Personalizado</option>
              <option>Personalizado</option>
              <option>Aprendizaje Adaptativo</option>
            </select>
          </div>

          <div class="st-divider"></div>

          <div class="mb-3">
            <label class="form-label">Archivo de demanda (.xlsx)</label>
            <input class="form-control st-input" type="file" name="file" accept=".xlsx,.xls" required>
          </div>

          {% if error %}
          <div class="alert alert-danger py-2">{{ error }}</div>
          {% endif %}

          <button class="btn btn-primary w-100 st-primary" type="submit">
            üöÄ Ejecutar Optimizaci√≥n
          </button>
        </form>
      </div>
    </div>

    <!-- PANEL DERECHO (solo texto informativo como en Streamlit) -->
    <div class="col-12 col-lg-8">
      <div class="st-card">
        <span class="pill">Modo Streamlit (s√≠ncrono)</span>
        <p class="text-muted mb-0 mt-2">
          Sube tu Excel y se calcular√° todo en esta misma p√°gina (sin jobs ni polling).
        </p>
      </div>
    </div>
  </div>
</div>

</body>
</html>


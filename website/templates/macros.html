{% macro user_dropdown(is_auth) %}
  {% set avatar = session.get('avatar_url') %}
  {% set user_email = session.get('user', 'Invitado') %}
  <div class="dropdown">
    <a href="#" class="d-flex align-items-center text-decoration-none" role="button" data-bs-toggle="dropdown" aria-expanded="false">
      {% if avatar %}
        <img src="{{ avatar }}" class="rounded-circle me-2" alt="avatar" width="32" height="32">
      {% else %}
        <i class="bi bi-person-circle fs-4 me-2" aria-hidden="true"></i>
      {% endif %}
      <span>{{ user_email }} ▾</span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end">
      <li><a class="dropdown-item" href="{{ url_for('configuracion') }}">Perfil</a></li>
      <li><hr class="dropdown-divider"></li>
      {% if is_auth %}
        <li><a class="dropdown-item" href="{{ url_for('logout') }}">Salir</a></li>
      {% else %}
        <li><a class="dropdown-item" href="{{ url_for('login') }}">Iniciar sesión</a></li>
      {% endif %}
    </ul>
  </div>
{% endmacro %}

{% if table %}
<table class="table table-bordered mb-3">
  <thead><tr>{% for k in table[0].keys() %}<th>{{ k }}</th>{% endfor %}</tr></thead>
  <tbody>
  {% for row in table %}
  <tr>{% for v in row.values() %}<td>{{ v }}</td>{% endfor %}</tr>
  {% endfor %}
  </tbody>
</table>
{% endif %}
{% if summary %}
<ul class="list-group mb-3">
  {% for k,v in summary.items() %}<li class="list-group-item d-flex justify-content-between"><span>{{ k }}</span><span>{{ v }}</span></li>{% endfor %}
</ul>
{% endif %}
{% if analysis %}
<h4>Análisis de Turnos</h4>
<table class="table table-sm mb-3">
  <tbody>
  {% for row in analysis %}
  <tr><td>{{ row['Métrica'] }}</td><td>{{ row['Valor'] }}</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endif %}
{% if recommendations %}
<div class="alert alert-info"><ul class="mb-0">
  {% for rec in recommendations %}<li>{{ rec }}</li>{% endfor %}
</ul></div>
{% endif %}
{% if figure_json %}
<div id="staffing-figure" data-figure='{{ figure_json | tojson | safe }}'></div>
<script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
<script>(function(){var el=document.getElementById('staffing-figure');if(el){var fig=JSON.parse(el.dataset.figure);Plotly.react(el, fig.data, fig.layout);}})();</script>
{% endif %}
